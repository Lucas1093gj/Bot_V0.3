#####################################################################
#                                                                   #
#          LISTE COMPL√àTE DES FONCTIONNALIT√âS - FUNBOT V0.3          #
#                                                                   #
#####################################################################

Ce document r√©pertorie toutes les fonctionnalit√©s actuellement impl√©ment√©es dans le bot et son interface web.

---

### ü§ñ FONCTIONNALIT√âS DU BOT DISCORD (COMMANDES SLASH)

**‚öôÔ∏è DiscordMaker (Gestion de Serveur)**
- `/dashboard` : Envoie un lien priv√© pour acc√©der au tableau de bord web.
- `/discordmaker setup` : Ouvre un panneau de configuration priv√© pour d√©finir la structure du serveur (r√¥les, salons, etc.).
- `/discordmaker start` : Construit le serveur en se basant sur la configuration sauvegard√©e.
- `/discordmaker reset` : Nettoie uniquement les r√¥les et salons cr√©√©s par le bot (bas√© sur la base de donn√©es).
- `/discordmaker full-reset` : [Owner uniquement] R√©initialise COMPL√àTEMENT le serveur (supprime tous les r√¥les et salons) apr√®s une double confirmation.
- `/discordmaker backup` : Cr√©e une sauvegarde JSON de la structure actuelle du serveur (r√¥les, salons, permissions) et l'envoie en message priv√©.
- `/discordmaker restore` : [Owner uniquement] Restaure la structure d'un serveur √† partir d'un fichier de sauvegarde `.json` fourni.
- `/discordmaker post-roles` : Poste un message avec un menu d√©roulant pour que les membres puissent s'auto-attribuer des r√¥les.

**üéµ Musique (Wavelink)**
- `/musique play [recherche]` : Joue une musique (YouTube) ou l'ajoute √† la file d'attente.
- `/musique playnext [recherche]` : Ajoute une musique en haut de la file d'attente.
- `/musique seek [temps]` : Avance ou recule la lecture √† un moment pr√©cis (ex: 1m30s, 90, 1:30).
- `/musique queue` : Affiche la file d'attente.
- `/musique clear` : Vide la file d'attente.
- `/musique shuffle` : M√©lange la file d'attente.
- `/musique loop [mode]` : R√©p√®te la musique actuelle (track), la file d'attente (queue), ou d√©sactive la r√©p√©tition.
- **Contr√¥les Interactifs Persistants** : Un message "En cours de lecture" avec des boutons (Pause/Play, Skip, Stop, Quitter, File d'attente) qui restent fonctionnels m√™me apr√®s un red√©marrage du bot.
- **Sauvegarde d'√âtat** : Si le bot est d√©connect√©, il sauvegarde la file d'attente, le volume et le mode de boucle, et propose de les restaurer √† la prochaine commande `/play`.

**üõ°Ô∏è Mod√©ration**
- `/clear [nombre]` : Supprime un nombre de messages dans un salon.
- `/warn [membre] [raison]` : Avertit un membre et enregistre l'avertissement dans la base de donn√©es.
- `/warnings [membre]` : Affiche l'historique des avertissements d'un membre.
- `/delwarn [id]` : Supprime un avertissement sp√©cifique via son ID.
- `/mute [membre] [dur√©e] [raison]` : Applique un timeout √† un membre.
- `/unmute [membre]` : Retire le timeout d'un membre.
- `/lock [salon]` : Verrouille un salon pour que les membres ne puissent plus y envoyer de messages.
- `/unlock [salon]` : D√©verrouille un salon.

**üéüÔ∏è Tickets**
- `/ticket open [sujet]` : Cr√©e un salon priv√© ("ticket") pour une discussion entre un membre et le staff.

**üéâ Utilitaires & Fun**
- `/poll [question] [options...]` : Cr√©e un sondage simple avec des r√©actions.
- `/help` : Affiche un panneau d'aide interactif.
- `/serverinfo` : Affiche des statistiques sur le serveur.
- `/webhelp` : Affiche une aide d√©di√©e au tableau de bord web.
- `/userinfo [membre]` : Affiche des informations sur un membre.

**üìù Journal d'Audit (Logger)**
- Enregistre automatiquement les messages supprim√©s et modifi√©s dans la base de donn√©es.
- `/getlog` : [Admin uniquement] Envoie la base de donn√©es des logs en message priv√©.

**üîí Confidentialit√© & Donn√©es**
- `/mydata` : Permet √† un utilisateur de recevoir une copie de toutes ses donn√©es personnelles (niveaux, avertissements) stock√©es par le bot, envoy√©e en message priv√©.

---
**üèÜ Syst√®me de Niveaux (Leveling)**
- Gain d'XP automatique en envoyant des messages (avec un cooldown pour √©viter le spam).
- Notification dans le salon lorsqu'un membre passe un niveau.
- Le classement est visible via le tableau de bord web.

### üåê FONCTIONNALIT√âS DU TABLEAU DE BORD WEB

**‚ú® Pages Publiques**
- **Page d'Accueil** :
  - Pr√©sentation du bot et de ses fonctionnalit√©s.
  - Statistiques globales (nombre de serveurs, d'utilisateurs).
  - Journal des mises √† jour (VLog) modifiable depuis le panel admin.
  - **Interface dynamique** : Se transforme en un √©cran de s√©lection de serveur une fois l'utilisateur connect√©.
- **Page de Commandes (`/commands`)** :
  - Liste toutes les commandes slash du bot, group√©es par cat√©gorie.
  - Barre de recherche pour filtrer les commandes.
- **Page de Statut (`/status`)** :
  - Affiche en temps r√©el le statut du bot, de la base de donn√©es et des n≈ìuds musicaux (Lavalink).
  - Indique la latence du bot.
- **Pages L√©gales** :
  - `/privacy-policy` : Page de politique de confidentialit√©.
  - `/terms-of-service` : Page des conditions d'utilisation.

**üîí Pages Priv√©es (apr√®s connexion)**
- **S√©lection de Serveur** :
  - Affiche les serveurs o√π l'utilisateur est administrateur et o√π le bot est pr√©sent.
  - S√©pare les serveurs poss√©d√©s des serveurs simplement administr√©s.

**üõ†Ô∏è Dashboard par Serveur (`/dashboard/<id_serveur>`)**
- **Accueil du Dashboard** :
  - Statistiques cl√©s : nombre de membres, membres en ligne, avertissements du mois.
  - Affiche le membre le plus actif (bas√© sur le syst√®me de niveaux).
  - Affiche les derni√®res activit√©s de mod√©ration.
- **Annonces** :
  - Constructeur d'embeds avec pr√©visualisation en direct pour envoyer des annonces dans un salon sp√©cifique.
- **R√¥les-R√©action** :
  - Page existante mais fonctionnalit√© marqu√©e comme "en cours de d√©veloppement".
- **Param√®tres** :
  - **Niveaux** : Section pr√©sente mais fonctionnalit√©s marqu√©es comme "√† venir".
  - **Mod√©ration** : Configurer le salon des logs, la cat√©gorie des tickets, l'auto-r√¥le √† l'arriv√©e.
  - **Anti-Spam** : Activer/d√©sactiver le blocage des invitations Discord.
  - **Bienvenue** : Activer/d√©sactiver les messages de bienvenue, choisir le salon et personnaliser le message.
- **Avertissements** :
  - Tableau complet de tous les avertissements du serveur avec d√©tails (membre, mod√©rateur, raison, date).
- **Logs des Messages** :
  - Tableau des 100 derniers messages supprim√©s ou modifi√©s, avec d√©tails (auteur, salon, contenu avant/apr√®s).
- **Classement (Leaderboard)** :
  - Affiche le top 50 des membres les plus actifs avec leur niveau et leur XP.

**üëë Panel d'Administration Global (`/admin`)**
- **Acc√®s S√©curis√©** : Uniquement pour les administrateurs d√©finis dans le fichier `.env`.
- **Acc√®s Int√©gr√©** : Le lien vers le panel appara√Æt dans le menu d√©roulant de l'utilisateur si celui-ci est un admin.
- **Onglet Analytiques** :
  - Affiche les 5 commandes les plus populaires.
  - Affiche les 10 serveurs les plus actifs.
  - Journal en direct des 100 derni√®res commandes ex√©cut√©es (avec succ√®s ou erreur).
- **Onglet Configuration** :
  - **Mode Maintenance** : Activer/d√©sactiver un mode o√π seul les admins peuvent utiliser le bot.
  - **Red√©marrage du Bot** : Bouton pour red√©marrer le processus du bot √† distance.
  - **Journal des Mises √† Jour (VLog)** :
    - √âditeur de texte pour mettre √† jour le contenu affich√© sur la page d'accueil.
    - Guide d'utilisation du HTML simple (titres, listes, liens...).
    - Modale de confirmation avec pr√©visualisation avant de sauvegarder.
  - **Historique du VLog** : Affiche les 5 derni√®res modifications du journal, avec le nom de l'admin et la date.
  - **Annonce Globale** : Envoyer un message priv√© (embed) √† tous les propri√©taires de serveurs o√π le bot est pr√©sent.
- **Onglet Utilisateurs** :
  - **Recherche d'Utilisateur** : Permet de trouver un utilisateur par son ID et de voir les serveurs en commun avec le bot.
- **Navigation** : Un bouton "Quitter le panel admin" permet de revenir facilement √† la s√©lection de serveurs.

---

### üî© ARCHITECTURE ET FONCTIONNALIT√âS INTERNES

- **Base de Donn√©es (SQLite)** : Utilisation d'aiosqlite pour toutes les op√©rations asynchrones.
- **Structure Modulaire (Cogs)** : Le code du bot est s√©par√© en modules logiques (musique, mod√©ration, etc.).
- **Gestion des Erreurs** : Gestionnaires d'erreurs pour les commandes slash.
- **Verrouillage des Op√©rations Critiques** : Un `asyncio.Lock` emp√™che les conflits lors des op√©rations longues comme `/discordmaker start`.
- **D√©ploiement** : Le serveur web Flask est servi via `waitress` pour un environnement de production.
- **Configuration via `.env`** : Toutes les cl√©s et IDs sensibles sont g√©r√©s via un fichier d'environnement.