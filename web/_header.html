<header class="main-header">
    <div class="header-content">
        <a href="{{ url_for('public.home') }}" class="header-logo">
            <img src="{{ url_for('static', filename='image/funbotlogo.jpg') }}" alt="Logo FunBot">
            <span>FunBot</span>
        </a>

        <nav class="header-nav">
            {% if logged_in %}
                {# --- MENU UTILISATEUR CONNECTÉ --- #}
                <div class="user-menu-container">
                    <button class="user-menu-toggle" id="user-menu-button" aria-label="{{ _('header_open_user_menu') }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </button>
                    <div class="user-dropdown-menu" id="user-dropdown">
                        <div class="dropdown-header">
                            {% if user_info.avatar %}
                                <img src="https://cdn.discordapp.com/avatars/{{ user_info.id }}/{{ user_info.avatar }}.png" alt="Avatar" class="dropdown-avatar">
                            {% endif %}
                            <span class="dropdown-username">{{ user_info.username }}</span>
                        </div>
                        {% if is_bot_admin %}
                        <a href="{{ url_for('admin.dashboard') }}" class="dropdown-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                            {{ _('header_admin_panel') }}
                        </a>
                        <div class="dropdown-divider"></div>
                        {% endif %}
                        <a href="{{ url_for('public.settings_page') }}" class="dropdown-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2-0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            {{ _('header_settings') }}
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="{{ url_for('auth.logout') }}" class="dropdown-item dropdown-item-danger">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                            {{ _('header_logout') }}
                        </a>
                    </div>
                </div>
            {% else %}
                {# --- MENU VISITEUR (NON CONNECTÉ) --- #}
                <div class="desktop-nav">
                    <a href="{{ url_for('public.commands_page') }}" class="header-link">{{ _('header_commands') }}</a>
                    <a href="{{ url_for('public.status_page') }}" class="header-link">{{ _('header_status') }}</a>
                </div>
                <button class="mobile-nav-toggle" id="mobile-nav-toggle" aria-label="{{ _('header_open_menu') }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
            {% endif %}
        </nav>
    </div>
    <div class="mobile-nav-menu" id="mobile-nav-menu">
        <a href="{{ url_for('public.commands_page') }}" class="header-link">{{ _('header_commands') }}</a>
        <a href="{{ url_for('public.status_page') }}" class="header-link">{{ _('header_status') }}</a>
    </div>
</header>
